[user]
  name = Stephen Best
  email = bestie@gmail.com
[alias]
  stat = status
  st = status
  d = diff
  co = checkout
  cob = checkout -b
  cp = cherry-pick
  l = log
  ll = log -p
  lt = log trunk..
  llt = log -p trunk..
  lm = log master..
  llm = log -p master..
  br = branch
  unstage = rm --cached
  staged = diff --cached
  # http://coderwall.com/p/euwpig?i=3&p=1&t=git
	lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --
  recent-branches = for-each-ref --count=10 --sort=-committerdate refs/heads/ --format='%(refname:short)'
  # Thanks to @haacked http://haacked.com/archive/2014/07/28/github-flow-aliases
  up = !git pull --rebase --prune $@ && git submodule update --init --recursive
  wip = !git add -A && git commit -m "WIP"
  wipe = !git add -A && git commit -qm 'WIPE SAVEPOINT' && git reset HEAD~1 --hard
  merged-branches = !git branch --merged ${1-master}
  bclean = "!f() { git branch --merged ${1-master} | grep -v " ${1-master}$" | xargs -r git branch -d; }; f"
  bdone = "!f() { git checkout ${1-master} && git up && git bclean ${1-master}; }; f"

[core]
  attributesfile = ~/.gitattributes
  excludesfile = ~/.gitignore
  editor = vim
[push]
  default = upstream

# http://bitfission.com/blog/2010/07/auto-merge-gemfile-lock.html
[merge "bundlelock"]
  name = lock Gemfile
  driver = bundle install

# http://tbaggery.com/2010/10/24/reduce-your-rails-schema-conflicts.html
[merge "railsschema"]
  name = newer Rails schema version
  driver = "ruby -e '\n\
    system %(git), %(merge-file), %(--marker-size=%L), %(%A), %(%O), %(%B)\n\
    b = File.read(%(%A))\n\
    b.sub!(/^<+ .*\\nActiveRecord::Schema\\.define.:version => (\\d+). do\\n=+\\nActiveRecord::Schema\\.define.:version => (\\d+). do\\n>+ .*/) do\n\
      %(ActiveRecord::Schema.define(:version => #{[$1, $2].max}) do)\n\
    end\n\
    File.open(%(%A), %(w)) {|f| f.write(b)}\n\
    exit 1 if b.include?(%(<)*%L)'"
